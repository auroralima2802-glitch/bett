"use strict";(self["webpackChunkjb_web_app"]=self["webpackChunkjb_web_app"]||[]).push([[367],{367:function(t,n,a){a.r(n),a.d(n,{default:function(){return lt}});var s=a(73396),i=a(87139);const e=t=>((0,s.dD)("data-v-0af1864e"),t=t(),(0,s.Cn)(),t),o={class:"round-details"},r={key:0,style:{"align-self":"center"}},d={key:1,class:"round-container"},l={class:"round-header"},p={class:"title"},h={class:"round-summary"},u={class:"row"},c={class:"row"},m=e((()=>(0,s._)("span",null,"Nº ganhadores (rodada)",-1))),_={class:"row"},w=e((()=>(0,s._)("span",null,"Máximo acertos",-1))),g={key:0,class:"row"},x={class:"row"},f=e((()=>(0,s._)("span",null,"Acumulado",-1))),b={key:1,class:"row"},v=e((()=>(0,s._)("span",null,"Prêmio rateio:",-1))),z={key:2,class:"row"},k=e((()=>(0,s._)("span",null,"Prêmio 10 pontos",-1))),y={key:0,class:"round-extractions"},$=e((()=>(0,s._)("div",{style:{"margin-top":"5px","margin-bottom":"5px"}},[(0,s._)("span",{class:"title"},"Resultados")],-1))),T={class:"numbers-label"},P={key:1,class:"round-winners"},N={class:"title"},R={class:"row"},D=e((()=>(0,s._)("span",null,"Ticket",-1))),S={class:"row"},C=e((()=>(0,s._)("span",null,"Ponto",-1))),F={class:"row"},O=e((()=>(0,s._)("span",null,"Falta",-1))),q={class:"numbers-label"},J={class:"row"},B=e((()=>(0,s._)("span",null,"Acertos",-1))),j={class:"numbers-label"},A={class:"row"},M=e((()=>(0,s._)("span",null,"Prêmio",-1))),E={key:2,class:"round-winners"},L={class:"title"},H={class:"row"},K=e((()=>(0,s._)("span",null,"Ticket",-1))),Y={class:"row"},U=e((()=>(0,s._)("span",null,"Ponto",-1))),W={class:"row"},Z=e((()=>(0,s._)("span",null,"Falta",-1))),I={class:"numbers-label"},G={class:"row"},Q=e((()=>(0,s._)("span",null,"Acertos",-1))),V={class:"numbers-label"},X={key:0,class:"row"},tt=e((()=>(0,s._)("span",null,"Prêmio",-1))),nt={style:{display:"flex",gap:"10px"}},at=e((()=>(0,s._)("i",{class:"fas fa-print"},null,-1))),st=e((()=>(0,s._)("i",{class:"fas fa-share-alt"},null,-1)));function it(t,n,a,e,it,et){const ot=(0,s.up)("Button");return(0,s.wg)(),(0,s.iD)("div",o,[it.round?((0,s.wg)(),(0,s.iD)("div",d,[(0,s._)("div",l,[(0,s._)("span",p,"Rodada "+(0,i.zw)(it.round.number)+" ("+(0,i.zw)(et.getRoundStatus())+")",1),(0,s._)("span",null,(0,i.zw)(t.formatDate(it.round.initial_date))+" até "+(0,i.zw)(t.formatDate(it.round.final_date)),1)]),(0,s._)("div",h,[(0,s._)("div",u,[(0,s._)("span",null,"Nº ganhadores ("+(0,i.zw)(it.round.qt_hits_partial_prize)+" pontos)",1),(0,s._)("span",null,(0,i.zw)(it.round.qt_winners_partial_prize),1)]),(0,s._)("div",c,[m,(0,s._)("span",null,(0,i.zw)(it.round.qt_winners),1)]),(0,s._)("div",_,[w,(0,s._)("span",null,(0,i.zw)(it.round.max_hits),1)]),it.round.max_hits>0?((0,s.wg)(),(0,s.iD)("div",g,[(0,s._)("span",null,"Pontos com "+(0,i.zw)(it.round.max_hits)+" acertos",1),(0,s._)("span",null,(0,i.zw)(it.round.winning_tickets.length),1)])):(0,s.kq)("",!0),(0,s._)("div",x,[f,(0,s._)("span",null,(0,i.zw)(t.formatCurrency(parseFloat(it.round.accumulated_value))),1)]),it.round.max_hits<10?((0,s.wg)(),(0,s.iD)("div",b,[v,(0,s._)("span",null,(0,i.zw)(t.formatCurrency(it.round.sales_amount*(it.round.prize_percentage/100)))+" ("+(0,i.zw)(it.round.qt_winners)+")",1)])):((0,s.wg)(),(0,s.iD)("div",z,[k,(0,s._)("span",null,(0,i.zw)(t.formatCurrency(it.round.paid_prize)),1)]))]),it.round.extractions.length>0?((0,s.wg)(),(0,s.iD)("div",y,[$,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(it.round.extractions,((t,n)=>((0,s.wg)(),(0,s.iD)("div",{class:"row",key:n},[(0,s._)("span",null,(0,i.zw)(t.name),1),(0,s._)("span",T,(0,i.zw)(JSON.parse(t.items).join(" - ")),1)])))),128))])):(0,s.kq)("",!0),it.round.partial_winning_tickets.length>0?((0,s.wg)(),(0,s.iD)("div",P,[(0,s._)("span",N,"Prêmio parcial ("+(0,i.zw)(it.round.qt_hits_partial_prize)+" pontos)",1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(it.round.partial_winning_tickets,((n,a)=>((0,s.wg)(),(0,s.iD)("div",{key:a,style:{width:"100%","border-bottom":"1px solid rgb(213, 213, 213)",padding:"5px 0px"}},[(0,s._)("div",R,[D,(0,s._)("span",null,(0,i.zw)(n.id),1)]),(0,s._)("div",S,[C,(0,s._)("span",null,(0,i.zw)(et.formatPointName(n)),1)]),(0,s._)("div",F,[O,(0,s._)("span",q,(0,i.zw)(et.dezenasFaltantes(JSON.parse(n.selected_numbers),JSON.parse(n.hits))),1)]),(0,s._)("div",J,[B,(0,s._)("span",j,(0,i.zw)(JSON.parse(n.hits).join("-")),1)]),(0,s._)("div",A,[M,(0,s._)("span",null,(0,i.zw)(t.formatCurrency(parseFloat(it.round.partial_prize/it.round.partial_winning_tickets.length))),1)])])))),128))])):(0,s.kq)("",!0),it.round.winning_tickets.length>0&&it.round.max_hits>0?((0,s.wg)(),(0,s.iD)("div",E,[(0,s._)("span",L,"Bilhetes que mais pontuaram ("+(0,i.zw)(it.round.max_hits)+" pontos)",1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(it.round.winning_tickets,((n,a)=>((0,s.wg)(),(0,s.iD)("div",{key:a,style:{width:"100%","border-bottom":"1px solid rgb(213, 213, 213)",padding:"5px 0px"}},[(0,s._)("div",H,[K,(0,s._)("span",null,(0,i.zw)(n.id),1)]),(0,s._)("div",Y,[U,(0,s._)("span",null,(0,i.zw)(et.formatPointName(n)),1)]),(0,s._)("div",W,[Z,(0,s._)("span",I,(0,i.zw)(et.dezenasFaltantes(JSON.parse(n.selected_numbers),JSON.parse(n.hits))),1)]),(0,s._)("div",G,[Q,(0,s._)("span",V,(0,i.zw)(JSON.parse(n.hits).join("-")),1)]),it.round.finished?((0,s.wg)(),(0,s.iD)("div",X,[tt,(0,s._)("span",null,(0,i.zw)(t.formatCurrency(parseFloat(n.expected_value))),1)])):(0,s.kq)("",!0)])))),128))])):(0,s.kq)("",!0),(0,s._)("div",nt,[(0,s.Wm)(ot,{loading:it.loading,onClick:n[0]||(n[0]=t=>et.handleButtonPrint()),elevation:"2",class:"print-btn"},{default:(0,s.w5)((()=>[at])),_:1},8,["loading"]),(0,s.Wm)(ot,{loading:it.loading,onClick:n[1]||(n[1]=t=>et.handleButtonShare()),elevation:"2",class:"print-btn"},{default:(0,s.w5)((()=>[st])),_:1},8,["loading"])])])):((0,s.wg)(),(0,s.iD)("span",r,"Rodada não encontrada"))])}a(82801);var et=a(31826),ot={name:"RoundDetails",components:{Button:et.Z},data(){return{round:null,loading:!1}},created(){this.round_id=this.$route.params.id,this.loadRoundDetails()},methods:{formatPointName(t){if(t.online){let n="",a=!1;for(let s=0;s<t.point_name.length;s++)" "===t.point_name[s]?(n+=" ",a=!0):n+=a?"*":t.point_name[s];return n}return t.point_name},dezenasFaltantes(t,n){var a=t;for(let s=0;s<t.length;s++)for(let i=0;i<n.length;i++)t[s]==n[i]&&a.splice(s,1);return a.join("-")},loadRoundDetails(){this.$api.get("/rounds/details",{headers:{Authorization:this.accessToken()},params:{round_id:this.round_id}}).then((t=>{this.round=t.data}))},getRoundStatus(){return new Date<new Date(this.round.initial_date)?"próxima rodada":new Date>new Date(this.round.initial_date)&&new Date<new Date(this.round.final_date)?"em andamento":this.round.finished?"encerrado":void 0},navigateToRoundBet(){this.$router.push({path:"/bet/bolaoDezenas"})},getBorderColor(){return"em andamento"==this.getRoundStatus()||"próxima rodada"==this.getRoundStatus()?"border-left: 3px solid var(--app-primary-color);":"border-left: 3px solid red;"},drawRoundResult(t=1250){let n=this.$store.getters.getPaperSize;var a=document.createElement("canvas");a.width="80MM"==n?576:376,a.height=1e4;var s=a.getContext("2d");let i=0,e=10;e=this.drawLine(s,i,e),e=this.drawTitle("Rodada "+this.round.number,s,a.width/2,e),e=this.drawLine(s,i,e),e=this.drawText(`Nº ganhadores ${this.round.qt_hits_partial_prize} pontos: `+this.round.qt_winners_partial_prize,s,i,e),e=this.drawText("Nº ganhadores (rodada): "+this.round.qt_winners,s,i,e),e=this.drawText("Acumulado: "+this.formatCurrency(parseFloat(this.round.accumulated_value)),s,i,e),e=this.drawText("Máximo acertos: "+this.round.max_hits,s,i,e),this.round.max_hits>0&&(e=this.drawText(`Pontos com ${this.round.max_hits} acertos: ${this.round.winning_tickets.length}`,s,i,e)),e=this.round.max_hits<10?this.drawText("Prêmio rateio: "+this.formatCurrency(this.round.sales_amount*(this.round.prize_percentage/100))+"("+this.round.qt_winners+")",s,i,e):this.drawText("Prêmio 10 pontos: "+this.formatCurrency(this.round.paid_prize),s,i,e),this.round.extractions.length>0&&(e=this.drawLine(s,i,e),e=this.drawBoldText("Resultados",s,i,e),e+=10,this.round.extractions.forEach((t=>{e=this.drawText(t.name,s,i,e),e=this.drawText(JSON.parse(t.items).join(" - "),s,i,e),e=this.drawLine(s,i,e)}))),this.round.partial_winning_tickets.length>0&&(e=this.drawBoldText(`Prêmio parcial (${this.round.qt_hits_partial_prize} pontos)`,s,i,e),e+=10,this.round.partial_winning_tickets.forEach((t=>{e=this.drawText("Ticket: "+t.id,s,i,e),e=this.drawText("Ponto: "+this.formatPointName(t),s,i,e),e=this.drawText("Falta: "+this.dezenasFaltantes(JSON.parse(t.selected_numbers),JSON.parse(t.hits)),s,i,e),e=this.drawText("Acertos: "+JSON.parse(t.hits).join(" - "),s,i,e),e=this.drawText("Prêmio: "+this.formatCurrency(parseFloat(this.round.partial_prize/this.round.partial_winning_tickets.length)),s,i,e),e=this.drawLine(s,i,e)}))),this.round.max_hits>0&&(e=this.drawBoldText("Mais pontos",s,i,e),e+=10,this.round.winning_tickets.forEach((t=>{e=this.drawText("Ticket: "+t.id,s,i,e),e=this.drawText("Ponto: "+this.formatPointName(t),s,i,e),e=this.drawText("Falta: "+this.dezenasFaltantes(JSON.parse(t.selected_numbers),JSON.parse(t.hits)),s,i,e),e=this.drawText("Acertos: "+JSON.parse(t.hits).join(" - "),s,i,e),e=this.drawText("Prêmio: "+this.formatCurrency(parseFloat(t.expected_value)),s,i,e),e=this.drawLine(s,i,e)}))),this.resizeCanvas(a,s,a.width,e);let o=[a];return a.height>t&&(o=this.divideCanvas(a,t)),o},generateHtmlRoundResult(){let t=this.$store.getters.getPaperSize,n=this.$store.getters.getFontSize,a="print://escpos.org/escpos/bt/print?srcTp=uri&srcObj=html&src='data:text/html,";return a+=`<div style="width: ${"58MM"==t?"219.21px":"302.36px"}; margin: 0; padding: 0">`,a+=`  \n\t\t\t<div style="display: flex; padding-top: 5px; justify-content: center; font-size: ${.7*n}; margin-bottom: 10px; border-bottom: solid black 1px; border-top: solid black 1px">\n\t\t\t\t<span style="font-weight: bold">Rodada ${this.round.number}</span>\n\t\t\t</div>\n\t\t\t`,a+=`\n\t\t\t<div style="display: flex; flex-direction: column; padding-bottom: 10px; margin-bottom: 10px; border-bottom: solid black 1px; margin-bottom: 5px">\n\t\t\t\t<span>Nº ganhadores ${this.round.qt_hits_partial_prize} pontos: ${this.round.qt_winners_partial_prize}</span>\n\t\t\t\t<span>Nº ganhadores (rodada): ${this.round.qt_winners}</span>\n\t\t\t\t<span>Acumulado: ${this.formatCurrency(parseFloat(this.round.accumulated_value))}</span>\n\t\t\t\t<span>Máximo acertos: ${this.round.max_hits}</span>\n\t\t\t`,this.round.max_hits>0&&(a+=`<span>Pontos com ${this.round.max_hits} acertos: ${this.round.winning_tickets.length}</span>`),this.round.max_hits<10?a+=`\n\t\t\t\t<span>Prêmio rateio: ${this.formatCurrency(this.round.sales_amount*(this.round.prize_percentage/100))} (${this.round.qt_winners})</span>\n\t\t\t\t`:a+=`\n\t\t\t\t<span>Prêmio 10 pontos: ${this.formatCurrency(this.round.paid_prize)}</span>\n\t\t\t\t`,a+="</div>",a+='\n\t\t\t\t<span style="font-weight: bold; margin-bottom: 5px">Resultados</span>\n\t\t\t',this.round.extractions.forEach((t=>{a+=`\n\t\t\t\t<div style="display: flex; flex-direction: column; margin-bottom: 10px; border-bottom: solid black 1px;">\n\t\t\t\t\t<span>${t.name}</span>\n\t\t\t\t\t<span>${JSON.parse(t.items).join(" - ")}</span>\n\t\t\t\t</div>\n\t\t\t\t`})),this.round.partial_winning_tickets.length>0&&(a+=`<span style="font-weight: bold"; margin-bottom: 10px>Prêmio parcial (${this.round.qt_hits_partial_prize} pontos)</span>`,this.round.partial_winning_tickets.forEach((t=>{a+=`\n\t\t\t\t\t<div style="display: flex; flex-direction: column; padding-bottom:10px; margin-bottom: 10px; border-bottom: solid black 1px;">\n\t\t\t\t\t\t<span>Ticket: ${t.id}</span>\n\t\t\t\t\t\t<span>Ponto: ${this.formatPointName(t)}</span>\n\t\t\t\t\t\t<span>Falta: ${this.dezenasFaltantes(JSON.parse(t.selected_numbers),JSON.parse(t.hits))}</span>\n\t\t\t\t\t\t<span>Acertos: ${JSON.parse(t.hits).join(" - ")}</span>\n\t\t\t\t\t\t<span>Prêmio: ${this.formatCurrency(parseFloat(this.round.partial_prize/this.round.partial_winning_tickets.length))}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t`}))),this.round.max_hits>0&&(a+='\n\t\t\t\t\t<span style="font-weight: bold; margin-bottom: 5px">Mais pontos</span>\n\t\t\t\t',this.round.winning_tickets.forEach((t=>{a+=`\n\t\t\t\t\t<div style="display: flex; flex-direction: column; padding-bottom:10px; margin-bottom: 10px; border-bottom: solid black 1px;">\n\t\t\t\t\t\t<span>Ticket: ${t.id}</span>\n\t\t\t\t\t\t<span>Ponto:  ${this.formatPointName(t)}</span>\n\t\t\t\t\t\t<span>Falta: ${this.dezenasFaltantes(JSON.parse(t.selected_numbers),JSON.parse(t.hits))}</span>\n\t\t\t\t\t\t<span>${"Acertos: "+JSON.parse(t.hits).join(" - ")}</span>\n\t\t\t\t\t\t<span>Prêmio: ${this.formatCurrency(parseFloat(t.expected_value))}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t`}))),a+="</div>",a},handleButtonShare(){this.loading=!0;var t=this.drawRoundResult(this.round,5e4)[0];t.toBlob((t=>{this.$api.post("/images/stores3",{attachment:t},{headers:{"Content-Type":"multipart/form-data",Authorization:this.accessToken()}}).then((t=>{this.loading=!1,navigator.share({title:`Rodada ${this.round.number}`,url:t.data.url})})).catch((t=>{this.loading=!1,console.log(t)}))}))},handleButtonPrint(){if("Tipo 1"==this.$store.getters.getPrintMethod){var t=this.drawRoundResult(this.round);t.forEach((function(t,n){setTimeout((function(){document.location="rawbt:"+t.toDataURL()}),5e3*n)})),this.loading=!0,setTimeout((()=>{this.loading=!1}),5e3)}if("Tipo 2"==this.$store.getters.getPrintMethod){this.loading=!0;let t=this.drawRoundResult(this.round,1e4)[0];t.toBlob((n=>{this.$api.post("/images/stores3",{attachment:n},{headers:{"Content-Type":"multipart/form-data",Authorization:this.accessToken()}}).then((n=>{const a=btoa(n.data.url+`&width=${t.width}`);document.location=`buprinter://print/${a}`,this.loading=!1})).catch((t=>{console.log(t),this.loading=!1}))}))}if("Tipo 3"==this.$store.getters.getPrintMethod){var n=this.generateHtmlRoundResult();document.location.href=n,this.loading=!0,setTimeout((()=>{this.loading=!1}),5e3)}if("Tipo 4"==this.$store.getters.getPrintMethod){let t=this.drawRoundResult(1e4);this.$api.post("/images",{base64:t[0].toDataURL(),height:t[0].height,width:t[0].width},{headers:{Authorization:this.accessToken()}}).then((t=>{document.location=`buprinter://print/${t.data.image.id}`,this.$router.push({path:this.path,replace:!0})})).catch((t=>{console.log(t)}))}if("Tipo 5"==this.$store.getters.getPrintMethod){this.loading=!0;let t=this.drawRoundResult(this.round,1e4)[0];t.toBlob((t=>{this.$api.post("/images/stores3",{attachment:t},{headers:{"Content-Type":"multipart/form-data",Authorization:this.accessToken()}}).then((t=>{document.location=`imageprinterapp://${t.data.url}&width=${this.$store.getters.getPaperSize}`,this.loading=!1})).catch((t=>{console.log(t),this.loading=!1}))}))}}}},rt=a(40089);const dt=(0,rt.Z)(ot,[["render",it],["__scopeId","data-v-0af1864e"]]);var lt=dt}}]);
//# sourceMappingURL=367.b66acced.js.map
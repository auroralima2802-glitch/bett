"use strict";(self["webpackChunkjb_web_app"]=self["webpackChunkjb_web_app"]||[]).push([[410],{32410:function(t,e,i){i.r(e),i.d(e,{default:function(){return Ft}});i(26699);var a=i(73396),s=i(87139);const n=t=>((0,a.dD)("data-v-101e762a"),t=t(),(0,a.Cn)(),t),o={class:"betOverview"},r=n((()=>(0,a._)("h3",null,"Reimprimir bilhete",-1))),l={key:0,style:{"align-self":"center",color:"white"}},d={key:1,class:"printConfig"},p=n((()=>(0,a._)("span",null,"Tamanho do papel",-1))),h=n((()=>(0,a._)("span",null,"Método de impressão",-1))),c={key:0},u=n((()=>(0,a._)("span",null,"Tamanho da fonte",-1))),m={key:0},w=n((()=>(0,a._)("legend",null,[(0,a._)("span",null,"Instantâneo")],-1))),g={class:"row"},_=n((()=>(0,a._)("span",null,"Acertos",-1))),f={style:{color:"green"}},k={class:"row"},T=n((()=>(0,a._)("span",null,"Erros",-1))),x={style:{color:"red"}},b={class:"row"},v=n((()=>(0,a._)("span",null,"Valor a receber",-1))),y={key:0,class:"instant-result"},$={class:"result-item"},C=n((()=>(0,a._)("span",null,"1º",-1))),z={class:"result-item"},S=n((()=>(0,a._)("span",null,"2º",-1))),N={class:"result-item"},A=n((()=>(0,a._)("span",null,"3º",-1))),M={class:"result-item"},O=n((()=>(0,a._)("span",null,"4º",-1))),B={class:"result-item"},D=n((()=>(0,a._)("span",null,"5º",-1))),J={class:"result-item"},L=n((()=>(0,a._)("span",null,"6º",-1))),E={class:"result-item"},P=n((()=>(0,a._)("span",null,"7º",-1))),R={key:2,class:"ticket-container"},F={class:"btn-ticket"},j={class:"print"},W=n((()=>(0,a._)("i",{class:"fas fa-print"},null,-1))),q=n((()=>(0,a._)("i",{class:"fas fa-share-alt"},null,-1))),U=n((()=>(0,a._)("i",{class:"fas fa-cog"},null,-1))),Y={class:"ticket-header"},H=n((()=>(0,a._)("div",{style:{display:"flex","justify-content":"center","font-weight":"bold"}},[(0,a._)("span",null,"BANCA ÚNICA")],-1))),I={class:"row"},V=n((()=>(0,a._)("span",null,"Ponto",-1))),K={class:"row"},Q=n((()=>(0,a._)("span",null,"Emissão",-1))),Z={class:"row"},G=n((()=>(0,a._)("span",null,"Nº. talão",-1))),X={class:"ticket-content"},tt={class:"ticket-game"},et={key:0},it={class:"ticket-footer"},at={class:"ticket-header"},st=n((()=>(0,a._)("div",{style:{display:"flex","justify-content":"center","font-weight":"bold"}},[(0,a._)("span",null,"BANCA ÚNICA")],-1))),nt={class:"row"},ot=n((()=>(0,a._)("span",null,"Ponto",-1))),rt={class:"row"},lt=n((()=>(0,a._)("span",null,"Emissão",-1))),dt={class:"row"},pt=n((()=>(0,a._)("span",null,"Nº. talão",-1))),ht={class:"ticket-content"},ct={key:0},ut={class:"summary-container"},mt={style:{"font-weight":"bold"}},wt={class:"ticket-footer"},gt={class:"ticket-header"},_t=n((()=>(0,a._)("div",{style:{display:"flex","justify-content":"center","font-weight":"bold"}},[(0,a._)("span",null,"BANCA ÚNICA")],-1))),ft={class:"row"},kt=n((()=>(0,a._)("span",null,"Ponto",-1))),Tt={class:"row"},xt=n((()=>(0,a._)("span",null,"Emissão",-1))),bt={class:"row"},vt=n((()=>(0,a._)("span",null,"Nº. talão",-1))),yt={class:"ticket-content"},$t={style:{display:"flex","flex-direction":"column"}},Ct=n((()=>(0,a._)("span",{style:{"font-weight":"bold"}},"Bolão de dezenas",-1))),zt=n((()=>(0,a._)("span",null,"Prêmio principal 10 pontos",-1))),St={class:"ticket-summary"},Nt={class:"ticket-footer"};function At(t,e,i,n,At,Mt){const Ot=(0,a.up)("Dropdown"),Bt=(0,a.up)("Divider"),Dt=(0,a.up)("Button");return(0,a.wg)(),(0,a.iD)("div",o,[r,0==At.tickets.length?((0,a.wg)(),(0,a.iD)("span",l," Nenhum bilhete disponível ")):(0,a.kq)("",!0),At.showPrintConfig?((0,a.wg)(),(0,a.iD)("div",d,[(0,a._)("div",null,[p,(0,a.Wm)(Ot,{onChange:Mt.setPrintConfig,modelValue:At.paperSize,"onUpdate:modelValue":e[0]||(e[0]=t=>At.paperSize=t),options:["58MM","80MM"],placeholder:"Tamanho do papel"},null,8,["onChange","modelValue"])]),(0,a._)("div",null,[h,(0,a.Wm)(Ot,{onChange:Mt.setPrintMethod,modelValue:At.printMethod,"onUpdate:modelValue":e[1]||(e[1]=t=>At.printMethod=t),options:["Tipo 1","Tipo 2","Tipo 3","Tipo 4","Tipo 5"],placeholder:"Método de impressão"},null,8,["onChange","modelValue"])]),"Tipo 1"==At.printMethod||"Tipo 3"==At.printMethod||"Tipo 4"==At.printMethod||"Tipo 5"==At.printMethod?((0,a.wg)(),(0,a.iD)("div",c,[u,(0,a.Wm)(Ot,{onChange:Mt.setFontSize,modelValue:At.fontSize,"onUpdate:modelValue":e[2]||(e[2]=t=>At.fontSize=t),options:[20,22,24,26,28,30,32],placeholder:"Tamanho da fonte"},null,8,["onChange","modelValue"])])):(0,a.kq)("",!0)])):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(At.tickets,((t,e)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:e},[t.instant_result?((0,a.wg)(),(0,a.iD)("fieldset",m,[w,(0,a._)("p",g,[_,(0,a._)("span",f,(0,s.zw)(t.games_won),1)]),(0,a._)("p",k,[T,(0,a._)("span",x,(0,s.zw)(t.games_lost),1)]),(0,a._)("p",b,[v,(0,a._)("span",null,(0,s.zw)(this.formatCurrency(Mt.calcularTotalRecebimento(t))),1)]),(0,a.Wm)(Bt),t.instant_result?((0,a.wg)(),(0,a.iD)("div",y,[(0,a._)("div",$,[C,(0,a._)("span",null,(0,s.zw)(JSON.parse(t.instant_result)[0]),1),(0,a._)("span",null,(0,s.zw)(this.getAnimal(JSON.parse(t.instant_result)[0].split("-")[1]).name),1)]),(0,a._)("div",z,[S,(0,a._)("span",null,(0,s.zw)(JSON.parse(t.instant_result)[1]),1),(0,a._)("span",null,(0,s.zw)(this.getAnimal(JSON.parse(t.instant_result)[1].split("-")[1]).name),1)]),(0,a._)("div",N,[A,(0,a._)("span",null,(0,s.zw)(JSON.parse(t.instant_result)[2]),1),(0,a._)("span",null,(0,s.zw)(this.getAnimal(JSON.parse(t.instant_result)[2].split("-")[1]).name),1)]),(0,a._)("div",M,[O,(0,a._)("span",null,(0,s.zw)(JSON.parse(t.instant_result)[3]),1),(0,a._)("span",null,(0,s.zw)(this.getAnimal(JSON.parse(t.instant_result)[3].split("-")[1]).name),1)]),(0,a._)("div",B,[D,(0,a._)("span",null,(0,s.zw)(JSON.parse(t.instant_result)[4]),1),(0,a._)("span",null,(0,s.zw)(this.getAnimal(JSON.parse(t.instant_result)[4].split("-")[1]).name),1)]),(0,a._)("div",J,[L,(0,a._)("span",null,(0,s.zw)(JSON.parse(t.instant_result)[5]),1),(0,a._)("span",null,(0,s.zw)(this.getAnimal(JSON.parse(t.instant_result)[5].split("-")[1]).name),1)]),(0,a._)("div",E,[P,(0,a._)("span",null,(0,s.zw)(JSON.parse(t.instant_result)[6]),1),(0,a._)("span",null,(0,s.zw)(this.getAnimal(JSON.parse(t.instant_result)[6].split("-")[1]).name),1)])])):(0,a.kq)("",!0)])):(0,a.kq)("",!0)],64)))),128)),At.tickets.length>0?((0,a.wg)(),(0,a.iD)("fieldset",R,[(0,a._)("legend",F,[(0,a._)("div",j,[t.$store.getters.getRegionConfig.can_print?((0,a.wg)(),(0,a.j4)(Dt,{key:0,loading:At.loading.print,elevation:"2",onClick:Mt.handleButtonPrint,class:"print-btn"},{default:(0,a.w5)((()=>[W])),_:1},8,["loading","onClick"])):(0,a.kq)("",!0),t.$store.getters.getRegionConfig.can_share?((0,a.wg)(),(0,a.j4)(Dt,{key:1,elevation:"2",onClick:Mt.handleButtonShare,class:"print-btn"},{default:(0,a.w5)((()=>[q])),_:1},8,["onClick"])):(0,a.kq)("",!0),t.$store.getters.getRegionConfig.can_print?((0,a.wg)(),(0,a.j4)(Dt,{key:2,elevation:"2",onClick:Mt.handleButtonShowPrintConfig,class:"print-btn"},{default:(0,a.w5)((()=>[U])),_:1},8,["onClick"])):(0,a.kq)("",!0)])]),At.tickets[0].contest_id?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("div",Y,[(0,a.Wm)(Bt),H,(0,a.Wm)(Bt),(0,a._)("div",I,[V,(0,a._)("span",null,(0,s.zw)(At.tickets[0].point_name),1)]),(0,a._)("div",K,[Q,(0,a._)("span",null,(0,s.zw)(this.formatDateFull(At.tickets[0].created_at)),1)]),(0,a._)("div",Z,[G,(0,a._)("span",null,(0,s.zw)(At.tickets[0].numero_talao),1)])]),(0,a.Wm)(Bt),(0,a._)("div",X,[(0,a._)("div",tt,[(0,a._)("span",null,"Palpites: "+(0,s.zw)(JSON.parse(At.tickets[0].selected_numbers).join(", ")+` (${JSON.parse(At.tickets[0].selected_numbers).length})`),1),(0,a._)("span",null,"Valor: "+(0,s.zw)(this.formatCurrency(parseFloat(At.tickets[0].total_value))),1),(0,a.Wm)(Bt)]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(At.tickets,((t,e)=>((0,a.wg)(),(0,a.iD)("div",{class:"ticket-game",key:e},[t.modality?((0,a.wg)(),(0,a.iD)("span",et,(0,s.zw)(t.modality),1)):(0,a.kq)("",!0),(0,a._)("span",null,"Concurso: "+(0,s.zw)(t.contest_name),1),(0,a._)("span",null,"Ticket: "+(0,s.zw)(t.id),1),(0,a._)("span",null,"Total: "+(0,s.zw)(this.formatCurrency(parseFloat(t.total_value))),1),(0,a._)("span",null,"Possível retorno: "+(0,s.zw)(this.formatCurrency(parseFloat(t.expected_value))),1),(0,a.Wm)(Bt)])))),128))]),(0,a._)("div",it,[(0,a._)("span",null,"Total geral: "+(0,s.zw)(this.formatCurrency(At.tickets.reduce(((t,e)=>t+parseFloat(e.total_value)),0))),1)])],64)):(0,a.kq)("",!0),At.tickets[0].extraction_id?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a._)("div",at,[(0,a.Wm)(Bt),st,(0,a.Wm)(Bt),(0,a._)("div",nt,[ot,(0,a._)("span",null,(0,s.zw)(At.tickets[0].point_name),1)]),(0,a._)("div",rt,[lt,(0,a._)("span",null,(0,s.zw)(this.formatDateFull(At.tickets[0].created_at)),1)]),(0,a._)("div",dt,[pt,(0,a._)("span",null,(0,s.zw)(At.tickets[0].numero_talao),1)])]),(0,a.Wm)(Bt),(0,a._)("div",ht,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(At.tickets[0].games,((e,i)=>((0,a.wg)(),(0,a.iD)("div",{class:"ticket-game",key:i},[(0,a._)("span",null,[(0,a.Uk)((0,s.zw)(e.modality_name+t.isCombined(e))+" - "+(0,s.zw)(e.award_name)+" ",1),e.modality_name.includes("Milhar")?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",ct,"| "+(0,s.zw)(this.getPositionName(JSON.parse(e.selected_positions)).join(", ")),1))]),(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(JSON.parse(e.selected_numbers),((t,i)=>((0,a.wg)(),(0,a.iD)("span",{key:i},(0,s.zw)(Mt.formatPalpite(t,i,JSON.parse(e.selected_numbers))),1)))),128))]),(0,a._)("span",null,"R$ "+(0,s.zw)(this.formatCurrency(parseFloat(e.value))),1),(0,a.Wm)(Bt)])))),128)),(0,a._)("div",ut,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(At.tickets,((t,e)=>((0,a.wg)(),(0,a.iD)("div",{class:"ticket-summary",key:e},[(0,a._)("span",mt,(0,s.zw)(t.games[0].extraction_name),1),(0,a._)("span",null,"Ticket: "+(0,s.zw)(t.id),1),(0,a._)("span",null,"Total: "+(0,s.zw)(this.formatCurrency(parseFloat(t.total_value))),1)])))),128)),(0,a.Wm)(Bt)])]),(0,a._)("div",wt,[(0,a._)("span",null,"Total geral: "+(0,s.zw)(this.formatCurrency(At.tickets.reduce(((t,e)=>t+parseFloat(e.total_value)),0))),1)])],64)):(0,a.kq)("",!0),At.tickets[0].round_id?((0,a.wg)(),(0,a.iD)(a.HY,{key:2},[(0,a._)("div",gt,[(0,a.Wm)(Bt),_t,(0,a.Wm)(Bt),(0,a._)("div",ft,[kt,(0,a._)("span",null,(0,s.zw)(At.tickets[0].point_name),1)]),(0,a._)("div",Tt,[xt,(0,a._)("span",null,(0,s.zw)(this.formatDateFull(At.tickets[0].created_at)),1)]),(0,a._)("div",bt,[vt,(0,a._)("span",null,(0,s.zw)(At.tickets[0].numero_talao),1)])]),(0,a.Wm)(Bt),(0,a._)("div",yt,[(0,a._)("div",$t,[Ct,(0,a._)("span",null,"Rodada "+(0,s.zw)(At.tickets[0].round_number),1),(0,a._)("span",null,"Cartela "+(0,s.zw)(At.tickets[0].number),1),zt,(0,a._)("span",null,(0,s.zw)(this.formatCurrency(parseFloat(At.tickets[0].accumulated_value))),1)]),(0,a.Wm)(Bt),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(At.tickets,((t,e)=>((0,a.wg)(),(0,a.iD)("div",{class:"ticket-game",key:e},[(0,a._)("span",null,"Ticket: "+(0,s.zw)(t.id),1),(0,a._)("span",null,"Palpites: "+(0,s.zw)(JSON.parse(t.selected_numbers).join(", ")+` (${JSON.parse(t.selected_numbers).length})`),1),(0,a._)("span",null,"Valor: "+(0,s.zw)(this.formatCurrency(parseFloat(t.total_value))),1),(0,a.Wm)(Bt)])))),128)),(0,a._)("div",St,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(At.tickets[0].extractions,((t,e)=>((0,a.wg)(),(0,a.iD)("span",{key:e},(0,s.zw)(t.name+" ("+this.formatDate(t.datetime)+")"),1)))),128))])]),(0,a.Wm)(Bt),(0,a._)("div",Nt,[(0,a._)("span",null,"Total geral: "+(0,s.zw)(this.formatCurrency(At.tickets.reduce(((t,e)=>t+parseFloat(e.total_value)),0))),1)])],64)):(0,a.kq)("",!0)])):(0,a.kq)("",!0)])}i(82801);var Mt=i(31826),Ot=i(15517),Bt=i(76709),Dt=i(81937),Jt=i(36797),Lt=i.n(Jt),Et={components:{Button:Mt.Z,Divider:Dt.Z,InputText:Bt.Z,Dropdown:Ot.Z},data(){return{tickets:[],quotedBets:[],paperSize:null,printMethod:null,fontSize:null,tradicionalConfig:null,showPrintConfig:!1,showPrintModal:!1,loading:{print:!1}}},created(){const t=this.$store.getters.getTicket,e=this.$store.getters.getProducts,i=Object.values(e).find((e=>e.product_id==t[0].product_id));if(i&&i.reimprimir&&t&&t.length>0){const e=t[0].created_at,a=Lt()(e),s=Lt()(),n=s.diff(a,"minutes"),o=i.tempo_reimpressao;n<=o&&(this.tickets=t)}this.loadQuotedBets(),this.paperSize=this.$store.getters.getPaperSize,this.printMethod=this.$store.getters.getPrintMethod,this.fontSize=this.$store.getters.getFontSize,this.tradicionalConfig=this.$store.getters.getTradicionalConfig},methods:{formatPalpite(t,e,i){const a=e===i.length-1,s=`(${t})`,n=`${t}`,o=this.quotedBets.some((e=>e.number===t)),r=a?"":", ";return o?s+r:n+r},loadQuotedBets(){this.$api.get("/quoted_bets",{headers:{Authorization:this.accessToken()}}).then((t=>{this.quotedBets=t.data}))},async handleButtonShare(){let t="",e="uniao.bancaunica.com"==window.location.hostname;for(let i=0;i<this.tickets.length;i++)this.tickets[i].round_id&&(t=t+e+"/#/tickets/"+window.btoa(this.tickets[i].id)+"/bolao\n"),this.tickets[i].contest_id&&(t=t+e+"/#/tickets/"+window.btoa(this.tickets[i].id)+"/caixa\n"),this.tickets[i].extraction_id&&(t=t+e+"/#/tickets/"+window.btoa(this.tickets[i].id)+"/jb\n");navigator.share({title:"Bilhete",text:t})},handleButtonPrint(){this.tickets[0].contest_id&&this.printCaixaTicket(),this.tickets[0].extraction_id&&this.printJbTicket(),this.tickets[0].round_id&&this.printRoundTicket()},handleButtonShowPrintConfig(){this.showPrintConfig=!this.showPrintConfig},setPrintConfig(){this.$store.dispatch("setPaperSize",{paperSize:this.paperSize})},setPrintMethod(){this.$store.dispatch("setPrintMethod",{printMethod:this.printMethod})},setFontSize(){this.$store.dispatch("setFontSize",{fontSize:this.fontSize})},drawJbTicket(t=1250,e="outro"){if("layout_two"==this.tradicionalConfig.ticket_layout){let e=this.tickets;const i=Object.values(e[0].games.reduce(((t,e)=>{const i=e.modality_name;return t[i]||(t[i]=[]),t[i].push(e),t}),{}));let a=document.createElement("canvas");a.width="80MM"==this.paperSize?576:376,a.height=1e4;let s=a.getContext("2d"),n=0,o=10;if(e[0].instant_result){let t=JSON.parse(e[0].instant_result);o=this.drawLine(s,n,o),o=this.drawTitle("INSTANTANEO",s,a.width/2,o),o=this.drawLine(s,n,o),o=this.drawBoldText("Acertos: "+e[0].games_won,s,n,o),o=this.drawBoldText("Erros: "+e[0].games_lost,s,n,o),o=this.drawBoldText("Valor a receber: "+this.formatCurrency(this.calcularTotalRecebimento(e[0])),s,n,o),o=this.drawLine(s,n,o),o=this.drawBoldText("1º: "+t[0]+" - "+this.getAnimal(t[0].slice(-2)).name,s,n,o),o=this.drawBoldText("2º: "+t[1]+" - "+this.getAnimal(t[1].slice(-2)).name,s,n,o),o=this.drawBoldText("3º: "+t[2]+" - "+this.getAnimal(t[2].slice(-2)).name,s,n,o),o=this.drawBoldText("4º: "+t[3]+" - "+this.getAnimal(t[3].slice(-2)).name,s,n,o),o=this.drawBoldText("5º: "+t[4]+" - "+this.getAnimal(t[4].slice(-2)).name,s,n,o),o=this.drawBoldText("6º: "+t[5]+" - "+this.getAnimal(t[5].slice(-2)).name,s,n,o),o=this.drawBoldText("7º: "+t[6]+" - "+this.getAnimal(t[6].slice(-2)).name,s,n,o),o+=20}o+=20,o=this.drawText("Ponto: "+e[0].point_name,s,n,o),o=this.drawText("Data: "+Lt()(e[0].created_at).format("DD/MM/Y"),s,n,o),o=this.drawText(`Número talão: ${e[0].numero_talao}`,s,n,o),o=this.drawLine(s,n,o),o=this.drawCenterText("APOSTAS",s,a.width/2,o),o=this.drawLine(s,n,o),i.forEach((t=>{var e="";JSON.parse(t[0].selected_numbers).forEach(((i,a)=>{e+=this.formatPalpite(i,a,JSON.parse(t[0].selected_numbers))})),o=this.drawText(`${t[0].modality_name.toUpperCase()}${this.isCombined(t[0])}`,s,n,o),o+=5,o=this.drawBoldText(e+` (${JSON.parse(t[0].selected_numbers).length})`,s,n,o),o+=5,t.forEach((t=>{o=this.drawText(`${t.award_name} | ${this.getPositionName(JSON.parse(t.selected_positions)).join(", ")}`,s,n,o),o=this.drawRightText(`R$ ${this.formatCurrency(parseFloat(t.value))}`,s,a.width,o)})),o=this.drawLine(s,n,o)})),e.forEach((t=>{o=this.drawText(t.games[0].extraction_name,s,n,o),o=this.drawText(`Ticket: ${t.id}`,s,n,o),o=this.drawBoldText(`Cód. ${t.code}`,s,n,o),o=this.drawText(`R$ ${this.formatCurrency(parseFloat(t.total_value))}`,s,n,o),o=this.drawLine(s,n,o)})),o=this.drawText("TOTAL: ",s,n,o),o=this.drawRightText(`R$ ${this.formatCurrency(e.reduce(((t,e)=>t+parseFloat(e.total_value)),0))}`,s,a.width,o),o=this.drawText(`${e[0].games.length} Jogo(s)`,s,n,o),o=this.drawLine(s,n,o),o=this.drawCenterText("Reclamações: 6 dia(s)",s,a.width/2,o),o=this.drawLine(s,n,o),o=this.drawQrCode(JSON.stringify(e.map((t=>({code:t.code,id:t.id})))),s,a.width/2,o),this.resizeCanvas(a,s,a.width,o);let r=[a];return a.height>t&&(r=this.divideCanvas(a,t)),r}{let n=this.tickets;var i=document.createElement("canvas");i.width="80MM"==this.paperSize?576:376,i.height=1e4;var a=i.getContext("2d");let o=0,r=10;if(n[0].instant_result){var s=JSON.parse(n[0].instant_result);r=this.drawLine(a,o,r),r=this.drawTitle("INSTANTANEO",a,i.width/2,r),r=this.drawLine(a,o,r),r=this.drawBoldText("Acertos: "+n[0].games_won,a,o,r),r=this.drawBoldText("Erros: "+n[0].games_lost,a,o,r),r=this.drawBoldText("Valor a receber: "+this.formatCurrency(this.calcularTotalRecebimento(n[0])),a,o,r),r=this.drawLine(a,o,r),r=this.drawBoldText("1º: "+s[0]+" - "+this.getAnimal(s[0].slice(-2)).name,a,o,r),r=this.drawBoldText("2º: "+s[1]+" - "+this.getAnimal(s[1].slice(-2)).name,a,o,r),r=this.drawBoldText("3º: "+s[2]+" - "+this.getAnimal(s[2].slice(-2)).name,a,o,r),r=this.drawBoldText("4º: "+s[3]+" - "+this.getAnimal(s[3].slice(-2)).name,a,o,r),r=this.drawBoldText("5º: "+s[4]+" - "+this.getAnimal(s[4].slice(-2)).name,a,o,r),r=this.drawBoldText("6º: "+s[5]+" - "+this.getAnimal(s[5].slice(-2)).name,a,o,r),r=this.drawBoldText("7º: "+s[6]+" - "+this.getAnimal(s[6].slice(-2)).name,a,o,r),r+=20}[5,8,9,13].includes(this.loggedUser().region_id)?(r=this.drawLine(a,o,r),r=this.drawTitle("LEÃO DA SORTE",a,i.width/2,r),r=this.drawLine(a,o,r)):(r+=10,r=this.drawText(e,a,o,r),r=this.drawLine(a,o,r),r=this.drawTitle("BANCA ÚNICA",a,i.width/2,r),r=this.drawLine(a,o,r)),r=this.drawText("Ponto: "+n[0].point_name,a,o,r),r=this.drawText("Emissão: "+Lt()(n[0].created_at).format("DD/MM/Y"),a,o,r),r=this.drawText(`Número talão: ${n[0].numero_talao}`,a,o,r),r=this.drawLine(a,o,r),n[0].games.forEach((t=>{var e="";JSON.parse(t.selected_numbers).forEach(((i,a)=>{e+=this.formatPalpite(i,a,JSON.parse(t.selected_numbers))})),r=this.drawText(`${t.modality_name}${this.isCombined(t)}: ${t.award_name} | ${this.getPositionName(JSON.parse(t.selected_positions)).join(", ")}`,a,o,r),r=this.drawBoldText(e+` (${JSON.parse(t.selected_numbers).length})`,a,o,r),r=this.drawText(`R$ ${t.value}`,a,o,r),r=this.drawLine(a,o,r)})),n.forEach((t=>{r=this.drawText(t.games[0].extraction_name,a,o,r),r=this.drawText(`Ticket: ${t.id}`,a,o,r),r=this.drawBoldText(`Cód. ${t.code}`,a,o,r),r=this.drawText(`Total: ${this.formatCurrency(parseFloat(t.total_value))}`,a,o,r),r=this.drawLine(a,o,r)})),r=this.drawBoldText(`Total geral: ${this.formatCurrency(n.reduce(((t,e)=>t+parseFloat(e.total_value)),0))}`,a,o,r),r=this.drawLine(a,o,r),r=this.drawText("O prêmio expira em 5 dias",a,o,r),r=this.drawQrCode(JSON.stringify(n.map((t=>({code:t.code,id:t.id})))),a,i.width/2,r),this.resizeCanvas(i,a,i.width,r);let l=[i];return i.height>t&&(l=this.divideCanvas(i,t)),l}},drawCaixaTicket(t=1250){let e=this.tickets;var i=document.createElement("canvas");i.width="80MM"==this.paperSize?576:376,i.height=3e4;var a=i.getContext("2d");let s=0,n=10;[5,8,9,13].includes(this.loggedUser().region_id)?(n=this.drawLine(a,s,n),n=this.drawTitle("LEÃO DA SORTE",a,i.width/2,n),n=this.drawLine(a,s,n)):(n=this.drawLine(a,s,n),n=this.drawTitle("BANCA ÚNICA",a,i.width/2,n),n=this.drawLine(a,s,n)),n=this.drawText("Ponto: "+e[0].point_name,a,s,n),n=this.drawText("Emissão: "+Lt()(e[0].created_at).format("DD/MM/Y"),a,s,n),n=this.drawText(`Número talão: ${e[0].numero_talao}`,a,s,n),n=this.drawLine(a,s,n),n=this.drawBoldText(JSON.parse(e[0].selected_numbers).join(", ")+` (${JSON.parse(e[0].selected_numbers).length})`,a,s,n),n=this.drawText(`R$ ${this.formatCurrency(parseFloat(e[0].total_value))}`,a,s,n),n=this.drawLine(a,s,n),e.forEach((t=>{n=this.drawText(t.contest_name,a,s,n),n=this.drawText(t.modality,a,s,n),n=this.drawText(`Ticket: ${t.id}`,a,s,n),n=this.drawBoldText(`Cód. ${t.code}`,a,s,n),n=this.drawText(`Total: ${this.formatCurrency(parseFloat(t.total_value))}`,a,s,n),n=this.drawText(`Possível retorno: ${this.formatCurrency(parseFloat(t.expected_value))}`,a,s,n),n=this.drawLine(a,s,n)})),n=this.drawBoldText(`Total geral: ${this.formatCurrency(e.reduce(((t,e)=>t+parseFloat(e.total_value)),0))}`,a,s,n),n=this.drawLine(a,s,n),n=this.drawText("O prêmio expira em 5 dias",a,s,n),n=this.drawQrCode(JSON.stringify(e.map((t=>({code:t.code,id:t.id})))),a,i.width/2,n),this.resizeCanvas(i,a,i.width,n);let o=[i];return i.height>t&&(o=this.divideCanvas(i,t)),o},drawRoundTicket(t=1250){let e=this.tickets;var i=document.createElement("canvas");i.width="80MM"==this.paperSize?576:376,i.height=3e4;var a=i.getContext("2d");let s=0,n=10;[5,8,9,13].includes(this.loggedUser().region_id)?(n=this.drawLine(a,s,n),n=this.drawTitle("LEÃO DA SORTE",a,i.width/2,n),n=this.drawLine(a,s,n)):(n=this.drawLine(a,s,n),n=this.drawTitle("BANCA ÚNICA",a,i.width/2,n),n=this.drawLine(a,s,n)),n=this.drawText("Ponto: "+e[0].point_name,a,s,n),n=this.drawText("Emissão: "+Lt()(e[0].created_at).format("DD/MM/Y"),a,s,n),n=this.drawText(`Número talão: ${e[0].numero_talao}`,a,s,n),n=this.drawLine(a,s,n),n=this.drawBoldText("Prêmio principal (10 pontos)",a,s,n,4),n=this.drawBoldText(`${this.formatCurrency(parseFloat(e[0].accumulated_value))}`,a,s,n,4),n-=12,n=this.drawLine(a,s,n),n=this.drawText("Bolão de dezenas",a,s,n),n=this.drawText(`Rodada ${e[0].round_number}`,a,s,n),n=this.drawText(`Cartela ${e[0].number}`,a,s,n),n=this.drawLine(a,s,n),e.forEach((t=>{n=this.drawText(`Ticket: ${t.id}`,a,s,n),n=this.drawBoldText(`Cód. ${t.code}`,a,s,n),n=this.drawBoldText(JSON.parse(t.selected_numbers).join(", ")+` (${JSON.parse(t.selected_numbers).length})`,a,s,n),n=this.drawText(`Total: ${this.formatCurrency(parseFloat(t.total_value))}`,a,s,n),n=this.drawLine(a,s,n)})),e[0].extractions.forEach((t=>{n=this.drawText(t.name+" ("+this.formatDate(t.datetime)+")",a,s,n)})),n=this.drawLine(a,s,n),n=this.drawBoldText(`Total geral: ${this.formatCurrency(e.reduce(((t,e)=>t+parseFloat(e.total_value)),0))}`,a,s,n),n=this.drawLine(a,s,n),n=this.drawText("O prêmio expira em 5 dias",a,s,n),n=this.drawQrCode(JSON.stringify(e.map((t=>({code:t.code,id:t.id})))),a,i.width/2,n),this.resizeCanvas(i,a,i.width,n);let o=[i];return i.height>t&&(o=this.divideCanvas(i,t)),o},printJbTicket(){if("Tipo 1"==this.printMethod){var t=this.drawJbTicket();this.loading.print=!0,setTimeout((()=>{this.loading.print=!1}),5e3),t.forEach((function(t,e){setTimeout((function(){document.location="rawbt:"+t.toDataURL()}),5e3*e)}))}if("Tipo 2"==this.printMethod&&(this.loading.print=!0,this.$api.post("/images/generateJbTicket",{tickets:this.tickets,layout:this.tradicionalConfig.ticket_layout,width:"80MM"==this.paperSize?576:376},{headers:{Authorization:this.accessToken()}}).then((t=>{const e=btoa(t.data.url+"&width="+("80MM"==this.paperSize?576:376));document.location=`buprinter://print/${e}`,this.loading.print=!1})).catch((t=>{console.log(t),this.loading.print=!1}))),"Tipo 3"==this.printMethod){this.loading.print=!0,setTimeout((()=>{this.loading.print=!1}),5e3);var e=this.generateHtmlJbticket();document.location.href=e}if("Tipo 4"==this.printMethod){this.loading.print=!0;let t=this.drawJbTicket(1e4);this.$api.post("/images",{base64:t[0].toDataURL(),height:t[0].height,width:t[0].width},{headers:{Authorization:this.accessToken()}}).then((t=>{this.loading.print=!1,document.location=`buprinter://print/${t.data.image.id}`})).catch((t=>{console.log(t),this.loading.print=!1}))}"Tipo 5"==this.printMethod&&(this.loading.print=!0,this.$api.post("/images/generateJbTicket",{tickets:this.tickets,layout:this.tradicionalConfig.ticket_layout,width:"80MM"==this.paperSize?576:376},{headers:{Authorization:this.accessToken()}}).then((t=>{document.location=`imageprinterapp://${t.data.url}&width=${this.paperSize}`,this.loading.print=!1,[5,8,9,13].includes(this.loggedUser().region_id)||this.$router.push({path:this.path,replace:!0})})).catch((t=>{console.log(t),this.loading.print=!1})))},printCaixaTicket(){if("Tipo 1"==this.printMethod){var t=this.drawCaixaTicket();this.loading.print=!0,setTimeout((()=>{this.loading.print=!1}),5e3),t.forEach((function(t,e){setTimeout((function(){document.location="rawbt:"+t.toDataURL()}),5e3*e)}))}if("Tipo 2"==this.printMethod){this.loading.print=!0;let t=this.drawCaixaTicket(1e4)[0];t.toBlob((e=>{this.$api.post("/images/stores3",{attachment:e},{headers:{"Content-Type":"multipart/form-data",Authorization:this.accessToken()}}).then((e=>{this.loading.print=!1;const i=btoa(e.data.url+`&width=${t.width}`);document.location=`buprinter://print/${i}`})).catch((t=>{this.loading.print=!1,console.log(t)}))}))}if("Tipo 3"==this.printMethod){this.loading.print=!0,setTimeout((()=>{this.loading.print=!1}),5e3);var e=this.generateHtmlCaixaticket();document.location.href=e}if("Tipo 4"==this.printMethod){this.loading.print=!0;let t=this.drawCaixaTicket(1e4);this.$api.post("/images",{base64:t[0].toDataURL(),height:t[0].height,width:t[0].width},{headers:{Authorization:this.accessToken()}}).then((t=>{this.loading.print=!1,document.location=`buprinter://print/${t.data.image.id}`})).catch((t=>{this.loading.print=!1,console.log(t)}))}if("Tipo 5"==this.printMethod){this.loading.print=!0;let t=this.drawCaixaTicket(1e4)[0];t.toBlob((t=>{this.$api.post("/images/stores3",{attachment:t},{headers:{"Content-Type":"multipart/form-data",Authorization:this.accessToken()}}).then((t=>{this.loading.print=!1,document.location=`imageprinterapp://${t.data.url}&width=${this.paperSize}`,[5,8,9,13].includes(this.loggedUser().region_id)||this.$router.push({path:this.path,replace:!0})})).catch((t=>{this.loading.print=!1,console.log(t)}))}))}},printRoundTicket(){if("Tipo 1"==this.printMethod){var t=this.drawRoundTicket();this.loading.print=!0,setTimeout((()=>{this.loading.print=!1}),5e3),t.forEach((function(t,e){setTimeout((function(){document.location="rawbt:"+t.toDataURL()}),5e3*e)}))}if("Tipo 2"==this.printMethod){this.loading.print=!0;let t=this.drawRoundTicket(1e4)[0];t.toBlob((e=>{this.$api.post("/images/stores3",{attachment:e},{headers:{"Content-Type":"multipart/form-data",Authorization:this.accessToken()}}).then((e=>{this.loading.print=!1;const i=btoa(e.data.url+`&width=${t.width}`);document.location=`buprinter://print/${i}`})).catch((t=>{console.log(t),this.loading.print=!1}))}))}if("Tipo 3"==this.printMethod){this.loading.print=!0,setTimeout((()=>{this.loading.print=!1}),5e3);var e=this.generateHtmlRoundticket();document.location.href=e}if("Tipo 4"==this.printMethod){this.loading.print=!0;let t=this.drawRoundTicket(1e4);this.$api.post("/images",{base64:t[0].toDataURL(),height:t[0].height,width:t[0].width},{headers:{Authorization:this.accessToken()}}).then((t=>{document.location=`buprinter://print/${t.data.image.id}`,this.loading.print=!1})).catch((t=>{this.loading.print=!1,console.log(t)}))}if("Tipo 5"==this.printMethod){this.loading.print=!0;let t=this.drawRoundTicket(1e4)[0];t.toBlob((t=>{this.$api.post("/images/stores3",{attachment:t},{headers:{"Content-Type":"multipart/form-data",Authorization:this.accessToken()}}).then((t=>{this.loading.print=!1,document.location=`imageprinterapp://${t.data.url}&width=${this.paperSize}`,[5,8,9,13].includes(this.loggedUser().region_id)||this.$router.push({path:this.path,replace:!0})})).catch((t=>{this.loading.print=!1,console.log(t)}))}))}},generateHtmlJbticket(){let t="print://escpos.org/escpos/bt/print?srcTp=uri&srcObj=html&src='data:text/html,";if(t+=`<div style="width: ${"58MM"==this.paperSize?"219.21px":"302.36px"}; margin: 0; padding: 0; font-size: ${.7*this.fontSize}">`,this.tickets[0].instant_result){var e=JSON.parse(this.tickets[0].instant_result);t+=`\n                        <div style="display: flex; padding-top: 5px; justify-content: center; border-bottom: solid black 1px; border-top: solid black 1px">\n                            <span>INSTANTANEO</span>\n                        </div>\n                        <div style="display: flex; margin-bottom: 30px; flex-direction: column; padding-top: 5px; justify-content: center; border-bottom: solid black 1px; border-top: solid black 1px">\n                            <span>Acertos: ${this.tickets[0].games_won}</span>\n                            <span>Erros: ${this.tickets[0].games_lost}</span>\n                            <span>Valor a receber: ${this.formatCurrency(this.calcularTotalRecebimento(this.tickets[0]))}</span>\n                        </div>\n                        <div style="display: flex; flex-direction: column; padding-top: 5px; justify-content: center; border-bottom: solid black 1px; border-top: solid black 1px">\n                            <span>1º ${e[0]+" - "+this.getAnimal(e[0].slice(-2)).name}</span>\n                            <span>2º ${e[1]+" - "+this.getAnimal(e[1].slice(-2)).name}</span>\n                            <span>3º ${e[2]+" - "+this.getAnimal(e[2].slice(-2)).name}</span>\n                            <span>4º ${e[3]+" - "+this.getAnimal(e[3].slice(-2)).name}</span>\n                            <span>5º ${e[4]+" - "+this.getAnimal(e[4].slice(-2)).name}</span>\n                            <span>6º ${e[5]+" - "+this.getAnimal(e[5].slice(-2)).name}</span>\n                            <span>7º ${e[6]+" - "+this.getAnimal(e[6].slice(-2)).name}</span>\n                        </div>\n                    `}return[5,8,9,13].includes(this.loggedUser().region_id)?t+='  \n                    <div style="display: flex; padding-top: 5px; justify-content: center; border-bottom: solid black 1px; border-top: solid black 1px">\n                        <span>LEÃO DA SORTE</span>\n                    </div>\n                    ':t+='  \n                    <div style="display: flex; padding-top: 5px; justify-content: center; border-bottom: solid black 1px; border-top: solid black 1px">\n                        <span>BANCA ÚNICA</span>\n                    </div>\n                    ',t+=`\n                <div style="margin-bottom: 10px; border-bottom: solid black 1px">\n                    <div style="display: flex; justify-content: space-between;">\n                        <span>Ponto</span>\n                        <span>${this.tickets[0].point_name}</span>\n                    </div>\n                    <div style="display: flex; justify-content: space-between;">\n                        <span>Emissão</span>\n                        <span>${Lt()(this.tickets[0].created_at).format("DD/MM/Y")}</span>\n                    </div>\n                    <div style="display: flex; justify-content: space-between;">\n                        <span>Nº. talão</span>\n                        <span>${this.tickets[0].length}</span>\n                    </div>\n                </div>\n                `,this.tickets[0].games.forEach((e=>{let i="";JSON.parse(e.selected_numbers).forEach(((t,a)=>{i+=this.formatPalpite(t,a,JSON.parse(e.selected_numbers))})),t+=`\n                    <div style="display: flex; flex-direction: column; border-bottom: solid black 1px; margin-bottom: 10px; padding-bottom: 10px">\n                        <span> ${e.modality_name}${this.isCombined(e)}: ${e.award_name} | ${this.getPositionName(JSON.parse(e.selected_positions)).join(", ")}</span>\n                        <span> ${i} (${JSON.parse(e.selected_numbers).length})</span>\n                        <span>R$ ${e.value}</span>\n                    </div>\n                    `})),this.tickets.forEach((e=>{t+=`\n                    <div style="display: flex; flex-direction: column; border-bottom: solid black 1px; margin-bottom: 10px; padding-bottom: 10px">\n                        <span>${e.games[0].extraction_name}</span>\n                        <span>Cód.: ${e.code}</span>\n                        <span>Ticket: ${e.id}</span>\n                        <span>Total: ${this.formatCurrency(parseFloat(e.total_value))}</span>\n                    </div>\n                    `})),t+=`<span>Total geral: ${this.formatCurrency(this.tickets.reduce(((t,e)=>t+parseFloat(e.total_value)),0))}</span>`,t+="</div>",t+="</div>",t},generateHtmlCaixaticket(){let t="print://escpos.org/escpos/bt/print?srcTp=uri&srcObj=html&src='data:text/html,";return t+=`<div style="width: ${"58MM"==this.paperSize?"219.21px":"302.36px"}; margin: 0; padding: 0; font-size: ${.7*this.fontSize}">`,t+='  \n                <div style="display: flex; padding-top: 5px; justify-content: center; border-bottom: solid black 1px; border-top: solid black 1px">\n                    <span>BANCA ÚNICA</span>\n                </div>\n                ',t+=`\n                <div style="margin-bottom: 10px; border-bottom: solid black 1px">\n                    <div style="display: flex; justify-content: space-between;">\n                        <span>Ponto</span>\n                        <span>${this.tickets[0].point_name}</span>\n                    </div>\n                    <div style="display: flex; justify-content: space-between;">\n                        <span>Emissão</span>\n                        <span>${Lt()(this.tickets[0].created_at).format("DD/MM/Y")}</span>\n                    </div>\n                </div>\n                `,t+=`\n                <div style="display: flex; flex-direction: column; border-bottom: solid black 1px; margin-bottom: 10px; padding-bottom: 10px">\n                    <span>${JSON.parse(this.tickets[0].selected_numbers).join(", ")} (${JSON.parse(this.tickets[0].selected_numbers).length})</span>\n                    <span>R$ ${this.formatCurrency(parseFloat(this.tickets[0].total_value))}</span>\n                </div>\n                `,this.tickets.forEach((e=>{t+=`\n                    <div style="display: flex; flex-direction: column; border-bottom: solid black 1px; margin-bottom: 10px; padding-bottom: 10px">\n                        ${e.modality?"<span>"+e.modality+"</span>":""}\n                        <span>Concurso: ${e.contest_name}</span>\n                        <span>Ticket: ${e.id}</span>\n                        <span>Cód.: ${e.code}</span>\n                        <span>Total: ${this.formatCurrency(parseFloat(e.total_value))}</span>\n                        <span>Possível retorno: ${this.formatCurrency(parseFloat(e.expected_value))}</span>\n                    </div>\n                     `})),t+=`<span>Total geral: ${this.formatCurrency(this.tickets.reduce(((t,e)=>t+parseFloat(e.total_value)),0))}</span>`,t+="</div>",t},generateHtmlRoundticket(){let t="print://escpos.org/escpos/bt/print?srcTp=uri&srcObj=html&src='data:text/html,";return t+=`<div style="width: ${"58MM"==this.paperSize?"219.21px":"302.36px"}; margin: 0; padding: 0; font-size: ${.7*this.fontSize}">`,t+='  \n                <div style="display: flex; justify-content: center; padding-top: 5px; border-bottom: solid black 1px; border-top: solid black 1px">\n                    <span>BANCA ÚNICA</span>\n                </div>\n                ',t+=`\n                <div style="margin-bottom: 10px; border-bottom: solid black 1px">\n                    <div style="display: flex; justify-content: space-between;">\n                        <span>Ponto</span>\n                        <span>${this.tickets[0].point_name}</span>\n                    </div>\n                    <div style="display: flex; justify-content: space-between;">\n                        <span>Emissão</span>\n                        <span>${Lt()(this.tickets[0].created_at).format("DD/MM/Y")}</span>\n                    </div>\n                </div>\n                `,t+=`\n                <div style="display: flex; flex-direction: column; margin-bottom: 10px; border-bottom: solid black 1px">\n                    <span style="font-weight: bold">Bolão de dezenas</span>\n                    <span>Rodada ${this.tickets[0].round_number}</span>\n                    <span>Cartela ${this.tickets[0].number}</span>\n                    <span>Prêmio principal (10 pontos)</span>\n                    <span>${this.formatCurrency(parseFloat(this.tickets[0].accumulated_value))}</span>\n                </div>\n                `,this.tickets.forEach((e=>{t+=`\n                    <div style="display: flex; flex-direction: column; border-bottom: solid black 1px; margin-bottom: 10px; padding-bottom: 10px">\n                        <span>Ticket: ${e.id}</span>\n                        <span>Cód.: ${e.code}</span>\n                        <span>${JSON.parse(e.selected_numbers).join(", ")} (${JSON.parse(e.selected_numbers).length})</span>\n                        <span>R$ ${this.formatCurrency(parseFloat(e.total_value))}</span>\n                    </div>\n                     `})),t+='<div style="display: flex; flex-direction: column; border-bottom: solid black 1px; margin-bottom: 10px; padding-bottom: 10px">',this.tickets[0].extractions.forEach((e=>{t+=`<span> ${e.name} (${this.formatDate(e.datetime)})</span>`})),t+="</div>",t+=`<span>Total geral: ${this.formatCurrency(this.tickets.reduce(((t,e)=>t+parseFloat(e.total_value)),0))}</span>`,t+="</div>",t},calcularTotalRecebimento(t){let e=0;const i=t.games.filter((t=>"win"==t.status));return e=i.reduce(((t,e)=>t+parseFloat(e.expected_value)),0),e}}},Pt=i(40089);const Rt=(0,Pt.Z)(Et,[["render",At],["__scopeId","data-v-101e762a"]]);var Ft=Rt}}]);
//# sourceMappingURL=410.8f0f542a.js.map
"use strict";(self["webpackChunkjb_web_app"]=self["webpackChunkjb_web_app"]||[]).push([[826],{13826:function(e,a,t){t.r(a),t.d(a,{default:function(){return q}});var s=t(73396),o=t(87139);const i=e=>((0,s.dD)("data-v-05add1f9"),e=e(),(0,s.Cn)(),e),l={class:"solicitations"},r={class:"title-section"},n=i((()=>(0,s._)("h3",null,"Solicitações",-1))),d={class:"filter"},c={class:"filter"},u={class:"filter"},p={class:"loading-area"},h={key:1},g={class:"solicitation-header"},m={class:"solicitation-summary"},_={class:"row"},f=i((()=>(0,s._)("span",null,"Data: ",-1))),w={class:"row"},v=i((()=>(0,s._)("span",null,"Tipo: ",-1))),y={class:"row"},b=i((()=>(0,s._)("span",null,"Valor: ",-1)));function D(e,a,t,i,D,C){const k=(0,s.up)("Button"),x=(0,s.up)("Calendar"),S=(0,s.up)("Dropdown"),z=(0,s.up)("Spinner");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("div",r,[n,(0,s.Wm)(k,{icon:"fa-solid fa-sliders",onClick:C.toggleFilter},null,8,["onClick"])]),(0,s._)("div",{class:"filter-container",style:(0,o.j5)(D.showFilter?"display: grid":"display: none")},[(0,s._)("div",d,[(0,s.Wm)(x,{label:"Data",modelValue:D.date_search,"onUpdate:modelValue":a[0]||(a[0]=e=>D.date_search=e),dateFormat:"dd/mm/yy",maxDate:new Date,selectionMode:"range",showIcon:!0},null,8,["modelValue","maxDate"])]),(0,s._)("div",c,[(0,s.Wm)(S,{onChange:C.loadSolicitations,modelValue:D.type_search,"onUpdate:modelValue":a[1]||(a[1]=e=>D.type_search=e),options:D.types,placeholder:"Tipo de solicitação",showClear:""},null,8,["onChange","modelValue","options"])]),(0,s._)("div",u,[(0,s.Wm)(S,{onChange:C.loadSolicitations,modelValue:D.status_search,"onUpdate:modelValue":a[2]||(a[2]=e=>D.status_search=e),options:D.status,placeholder:"Status",showClear:""},null,8,["onChange","modelValue","options"])])],4),(0,s._)("div",p,[D.loading?((0,s.wg)(),(0,s.j4)(z,{key:0})):(0,s.kq)("",!0),0==D.solicitations.length&&0==D.loading?((0,s.wg)(),(0,s.iD)("span",h,"Nenhum registro encontrado.")):(0,s.kq)("",!0)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(D.solicitations,((e,a)=>((0,s.wg)(),(0,s.iD)("div",{style:(0,o.j5)(C.getSolicitationColor(e)),class:"solicitation-item",key:a},[(0,s._)("div",g,[(0,s._)("span",null,(0,o.zw)(e.status[0].toUpperCase()+e.status.substring(1)),1)]),(0,s._)("div",m,[(0,s._)("div",_,[f,(0,s._)("span",null,(0,o.zw)(this.formatDateFull(e.created_at)),1)]),(0,s._)("div",w,[v,(0,s._)("span",null,(0,o.zw)(e.type),1)]),(0,s._)("div",y,[b,(0,s._)("span",null,(0,o.zw)(this.formatCurrency(parseFloat(e.value))),1)])])],4)))),128))])}var C=t(62711),k=t(15517),x=t(31826),S=t(79692),z=t(7834),V=t(81937),F=t(43781),j=t(56849),Z={components:{Calendar:C.Z,Button:x.Z,Dropdown:k.Z,Spinner:S.Z,ConfirmDialog:z.Z,Divider:V.Z,TabView:F.Z,TabPanel:j.Z},data(){return{solicitations:[],status:["Cancelado","Aprovado","Rejeitado","Reembolsado"],types:["Deposito","Saque"],loading:!1,showFilter:!1,date_search:[new Date((new Date).getFullYear(),(new Date).getMonth(),1),new Date],status_search:null,type_search:null}},created(){this.loadSolicitations()},watch:{date_search:function(e){e[1]&&this.loadSolicitations()}},methods:{loadSolicitations(){this.loading=!0,this.solicitations=[],this.$api.get("/solicitations",{headers:{Authorization:this.accessToken()},params:{from:this.date_search[0],to:this.date_search[1],status_search:this.status_search,type_search:this.type_search}}).then((e=>{this.solicitations=e.data,this.loading=!1})).catch((e=>{this.$toast.add({severity:"error",summary:"Erro",detail:e.response.data.message,life:3e3}),this.loading=!1}))},handleRefundDeposit(e){this.$confirm.require({message:"Tem certeza que deseja pedir extorno neste depósito? Esta ação não poderá ser revertida.",header:"Confirmar",icon:"pi pi-exclamation-triangle",accept:()=>{this.$api.delete(`solicitations/refundDeposit/${e.id}`,{headers:{Authorization:this.accessToken()}}).then((()=>{this.$toast.add({severity:"success",summary:"Sucesso",detail:"Extorno realizado com sucesso!",life:3e3}),this.loadSolicitations()})).catch((e=>{this.$toast.add({severity:"error",summary:"Erro",detail:e.response.data.error,life:3e3})}))},reject:()=>{}})},getSolicitationColor(e){switch(e.status){case"pendente":return"border-left: 4px solid #cde600; background: var(--bg-secondary); font-size: 14px;";case"cancelado":return"border-left: 4px solid gray; background: var(--bg-secondary); font-size: 14px;";case"rejeitado":return"border-left: 4px solid red; background: var(--bg-secondary); font-size: 14px";case"aprovado":return"border-left: solid #39d446 4px; background: var(--bg-secondary); font-size: 14px";case"reembolsado":return"border-left: solid #39d446 4px; background: var(--bg-secondary); font-size: 14px";default:break}},toggleFilter(){this.showFilter=!this.showFilter}}},T=t(40089);const $=(0,T.Z)(Z,[["render",D],["__scopeId","data-v-05add1f9"]]);var q=$}}]);
//# sourceMappingURL=826.09aefb9d.js.map